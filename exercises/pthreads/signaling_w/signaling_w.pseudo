procedure main:
  declare thread_count := read_integer()
  shared a_ready[thread_count] := create_semaphores(0)
  create_threads(thread_count, secondary)
end procedure

procedure secondary:
  wait(a_ready[a# - 1])
  statement a
  signal(a_ready[a#])
end procedure
